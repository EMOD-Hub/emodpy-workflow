
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://emod.idmod.org/emodpy-workflow/tutorials/modify_campaign_3_modify_country_model/">
      
      
        <link rel="prev" href="../modify_campaign_2_add_vaccine/">
      
      
        <link rel="next" href="../using_parameterized_calls/">
      
      
      <link rel="icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Modify campaign: Modify country model - emodpy-workflow</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-SVDSQH04EM"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-SVDSQH04EM",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-SVDSQH04EM",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modify-campaign-modify-country-model" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="emodpy-workflow" class="md-header__button md-logo" aria-label="emodpy-workflow" data-md-component="logo">
      
  <img src="../../images/EMOD_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            emodpy-workflow
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modify campaign: Modify country model
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="light-blue"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="white" data-md-color-accent="light-blue"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/EMOD-Hub/emodpy-workflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    EMOD-Hub/emodpy-workflow
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="emodpy-workflow" class="md-nav__button md-logo" aria-label="emodpy-workflow" data-md-component="logo">
      
  <img src="../../images/EMOD_logo.png" alt="logo">

    </a>
    emodpy-workflow
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EMOD-Hub/emodpy-workflow" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    EMOD-Hub/emodpy-workflow
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/reference_overview/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/virtual_environments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Virtual Environments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/projects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/frames/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Frames
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/filling_an_ingest_form/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filling an Ingest Form
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/sweeps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sweep files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/dtktools_comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    emodpy-workflow vs DtkTools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/age_bin_format/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingest Form Age Bin Format
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/filling_an_ingest_form/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filling an Ingest Form
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../how_to/how_to_index/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    How-to
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            How-to
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_make_project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Make a new project
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_create_frame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create a frame
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_use_elements_in_frame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use elements in a frame
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_list_hyperparameters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    List hyperparameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Make a single run
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_calibrate_frame/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calibrate a frame
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_sweep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sweep parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_download_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Download data
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_ingest_form/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingest Form How-to guides
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to/how_to_publish_new_country_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to publish new country model
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../get_started/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup and Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../create_project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Project
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../run_emod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run EMOD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modify_reports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modify Reports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modify_configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modify Configuration Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modify_campaign_1_minimal_campaign/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modify campaign: Minimal campaign
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modify_campaign_2_add_vaccine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modify campaign: Add HIV vaccine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Modify campaign: Modify country model
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Modify campaign: Modify country model
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#country-model-basics" class="md-nav__link">
    <span class="md-ellipsis">
      Country model basics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-the-campaign-by-changing-the-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      Modify the campaign by changing the country model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modify the campaign by changing the country model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-create-new-frame" class="md-nav__link">
    <span class="md-ellipsis">
      a. Create new frame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-create-zambiawithlonglastingprep-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      b. Create ZambiaWithLongLastingPrep country model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-update-frame-to-use-new-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      c. Update frame to use new country model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-run-emod" class="md-nav__link">
    <span class="md-ellipsis">
      d. Run EMOD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#e-plot-insetchart" class="md-nav__link">
    <span class="md-ellipsis">
      e. Plot InsetChart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f-plot-reporthivbyageandgender" class="md-nav__link">
    <span class="md-ellipsis">
      f. Plot ReportHIVByAgeAndGender
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#g-optional-public-zambiawithlonglastingprep-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      g. Optional: Public ZambiaWithLongLastingPrep country model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_parameterized_calls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using ParameterizedCalls
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sweep_parameter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Scenarios and Do Sweeps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../run_calibration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run Calibration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#country-model-basics" class="md-nav__link">
    <span class="md-ellipsis">
      Country model basics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-the-campaign-by-changing-the-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      Modify the campaign by changing the country model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modify the campaign by changing the country model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-create-new-frame" class="md-nav__link">
    <span class="md-ellipsis">
      a. Create new frame
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-create-zambiawithlonglastingprep-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      b. Create ZambiaWithLongLastingPrep country model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-update-frame-to-use-new-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      c. Update frame to use new country model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-run-emod" class="md-nav__link">
    <span class="md-ellipsis">
      d. Run EMOD
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#e-plot-insetchart" class="md-nav__link">
    <span class="md-ellipsis">
      e. Plot InsetChart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f-plot-reporthivbyageandgender" class="md-nav__link">
    <span class="md-ellipsis">
      f. Plot ReportHIVByAgeAndGender
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#g-optional-public-zambiawithlonglastingprep-country-model" class="md-nav__link">
    <span class="md-ellipsis">
      g. Optional: Public ZambiaWithLongLastingPrep country model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="modify-campaign-modify-country-model">Modify campaign: Modify country model</h1>
<h2 id="country-model-basics">Country model basics</h2>
<p>A <strong>country model</strong> in <code>emodpy-hiv</code> encapsulates campaign logic specific to a setting (like <code>Zambia</code> and <code>ZambiaForTraining</code>).
Subclassing allows you to override methods like <code>add_state_HCTUptakeAtDebut()</code> to customize intervention logic.</p>
<p>You can find country models in the <code>emodpy_hiv/country</code> directory. Each country model is a subclass of the base 
<code>Country</code> class and implements methods to define the cascade of care and other interventions. You can create a new 
country model by subclassing an existing one and overriding specific methods to change behavior. This allows you to 
tailor the campaign logic to different settings or scenarios, which has more control than editing the campaign.py 
inside the frame. Moreover, country models are inherently more shareable and reusable between researchers as they can 
be added to <code>emodpy-hiv</code> for future projects.</p>
<p>In this tutorial, we will create a new country model for <code>ZambiaWithLongLastingPrep</code> by subclassing the 
<code>ZambiaForTraining</code> country model and modifying the <code>add_state_HCTUptakeAtDebut()</code> method to distribute a long-lasting 
form of PrEP at sexual debut.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Before starting this tutorial, please complete the following:</p>
<ul>
<li><a href="../create_project/">Create project</a> tutorial to create a new project with a baseline frame.</li>
<li><a href="../run_emod/">Run EMOD</a> tutorial to understand how to run simulations and plot results with baseline frame.</li>
<li><a href="../modify_campaign_1_minimal_campaign/">Modify Campaign: Minimal Campaign</a> to understand the basics of campaign 
structure, including the cascade of care (CoC).</li>
<li><a href="../modify_campaign_2_add_vaccine/">Modify Campaign: Add HIV Vaccine</a> to understand how to add interventions 
directly to a campaign.</li>
</ul>
<h2 id="modify-the-campaign-by-changing-the-country-model">Modify the campaign by changing the country model</h2>
<h3 id="a-create-new-frame">a. Create new frame</h3>
<p>Make a new frame with <code>ZambiaWithLongLastingPrep</code> country model by running the following command in the project directory:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>python<span class="w"> </span>-m<span class="w"> </span>emodpy_workflow.scripts.new_frame<span class="w"> </span>--country<span class="w"> </span>ZambiaWithLongLastingPrep<span class="w"> </span>--dest<span class="w"> </span>ZambiaWithLongLastingPrep_coc
</code></pre></div></td></tr></table></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Since <code>ZambiaWithLongLastingPrep</code> is a country model that doesn't exist yet, the <code>emodpy_workflow</code> does not know where 
to find it. You will get a warning saying that this country model cannot be found. This warning can be ignored for 
now, as you will creating it in the next section.</p>
</div>
<h3 id="b-create-zambiawithlonglastingprep-country-model">b. Create ZambiaWithLongLastingPrep country model</h3>
<p>In the ZambiaWithLongLastingPrep_coc directory, create a new country model called <code>ZambiaWithLongLastingPrep</code> by 
subclassing the <code>ZambiaForTraining</code> Country Model and override <code>add_state_HCTUptakeAtDebut()</code> method to distribute a 
long-lasting form of PrEP at sexual debut, followed by a decision point for HIV testing uptake. The long-lasting PrEP is
distributed starting in 2025, and the HIV testing uptake decision point is triggered by a new event, 
<strong>Enter_Health_Care_System</strong>, which is broadcast when individuals receive the long-lasting PrEP. The HIV testing uptake
decision point stops listening for the <strong>STIDebut</strong> event after 35 years (i.e., after 2025).</p>
<p>Here are the detailed steps:</p>
<ol>
<li>
<p>Create a new Python file named <code>zambia_withlong_lasting_prep.py</code> in the <code>frames/ZambiaWithLongLastingPrep_coc</code> directory:</p>
<p>Add the following import statements at the top of the file:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">emod_api</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.distributor</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_intervention_triggered</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.individual_intervention</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a>  <span class="n">HIVSigmoidByYearAndSexDiagnostic</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a>  <span class="n">ControlledVaccine</span><span class="p">,</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>  <span class="n">BroadcastEvent</span><span class="p">,</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a>  <span class="n">Sigmoid</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="p">)</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.common</span><span class="w"> </span><span class="kn">import</span> <span class="n">CommonInterventionParameters</span><span class="p">,</span> <span class="n">PropertyRestrictions</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.cascade_of_care</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">coc</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.countries</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZambiaForTraining</span> 
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.waning_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">Constant</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Define the <code>ZambiaWithLongLastingPrep</code> class that subclasses <code>ZambiaForTraining</code>:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">ZambiaWithLongLastingPrep</span><span class="p">(</span><span class="n">ZambiaForTraining</span><span class="p">):</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>  <span class="n">country_name</span> <span class="o">=</span> <span class="s2">&quot;ZambiaWithLongLastingPrep&quot;</span>
</code></pre></div></td></tr></table></div>
The next few steps override the <code>add_state_HCTUptakeAtDebut()</code> method to implement the new logic.</p>
</li>
<li>
<p>Copy the <code>add_state_HCTUptakeAtDebut()</code> Function:</p>
<p>Copy this function from the Country class and cascade_of_care.py to your new <code>ZambiaWithLongLastingPrep</code> class. Please see 
<a href="../modify_campaign_1_minimal_campaign/">Modify Campaign: Minimal Campaign</a> Cascade of Care section for more details 
on this function.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span>
<span class="normal"><a href="#__codelineno-3-36">36</a></span>
<span class="normal"><a href="#__codelineno-3-37">37</a></span>
<span class="normal"><a href="#__codelineno-3-38">38</a></span>
<span class="normal"><a href="#__codelineno-3-39">39</a></span>
<span class="normal"><a href="#__codelineno-3-40">40</a></span>
<span class="normal"><a href="#__codelineno-3-41">41</a></span>
<span class="normal"><a href="#__codelineno-3-42">42</a></span>
<span class="normal"><a href="#__codelineno-3-43">43</a></span>
<span class="normal"><a href="#__codelineno-3-44">44</a></span>
<span class="normal"><a href="#__codelineno-3-45">45</a></span>
<span class="normal"><a href="#__codelineno-3-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="nd">@classmethod</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_state_HCTUptakeAtDebut</span><span class="p">(</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>  <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a>  <span class="n">campaign</span><span class="p">:</span> <span class="n">emod_api</span><span class="o">.</span><span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>  <span class="n">start_year</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>  <span class="n">node_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="p">):</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a>  <span class="n">disqualifying_properties</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">LOST_FOREVER</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">ON_ART</span><span class="p">,</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">LINKING_TO_ART</span><span class="p">,</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">ON_PRE_ART</span><span class="p">,</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">LINKING_TO_PRE_ART</span><span class="p">,</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">ART_STAGING</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>  <span class="p">]</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a>  <span class="n">initial_trigger</span> <span class="o">=</span> <span class="n">coc</span><span class="o">.</span><span class="n">CustomEvent</span><span class="o">.</span><span class="n">STI_DEBUT</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a>  <span class="n">hct_upate_at_debut_pv</span> <span class="o">=</span> <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">HCT_UPTAKE_AT_DEBUT</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a>  <span class="c1"># set up health care testing uptake at sexual debut by time</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>  <span class="n">female_multiplier</span> <span class="o">=</span> <span class="mf">1.0</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a>  <span class="n">uptake_choice</span> <span class="o">=</span> <span class="n">HIVSigmoidByYearAndSexDiagnostic</span><span class="p">(</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a>      <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a>      <span class="n">year_sigmoid</span><span class="o">=</span><span class="n">Sigmoid</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mf">0.005</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="mi">2005</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>      <span class="n">positive_diagnosis_event</span><span class="o">=</span><span class="n">coc</span><span class="o">.</span><span class="n">HCT_TESTING_LOOP_TRIGGER</span><span class="p">,</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a>      <span class="n">negative_diagnosis_event</span><span class="o">=</span><span class="n">coc</span><span class="o">.</span><span class="n">HCT_UPTAKE_POST_DEBUT_TRIGGER_1</span><span class="p">,</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a>      <span class="n">female_multiplier</span><span class="o">=</span><span class="n">female_multiplier</span><span class="p">,</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a>      <span class="n">common_intervention_parameters</span><span class="o">=</span><span class="n">CommonInterventionParameters</span><span class="p">(</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a>          <span class="n">disqualifying_properties</span><span class="o">=</span><span class="n">disqualifying_properties</span><span class="p">,</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a>          <span class="n">new_property_value</span><span class="o">=</span><span class="n">hct_upate_at_debut_pv</span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a>      <span class="p">)</span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a>  <span class="p">)</span>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a>  <span class="n">add_intervention_triggered</span><span class="p">(</span>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a>      <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a>      <span class="n">intervention_list</span><span class="o">=</span><span class="p">[</span><span class="n">uptake_choice</span><span class="p">],</span>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a>      <span class="n">triggers_list</span><span class="o">=</span><span class="p">[</span><span class="n">initial_trigger</span><span class="p">],</span>
<a id="__codelineno-3-36" name="__codelineno-3-36"></a>      <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
<a id="__codelineno-3-37" name="__codelineno-3-37"></a>      <span class="n">property_restrictions</span><span class="o">=</span><span class="n">PropertyRestrictions</span><span class="p">(</span>
<a id="__codelineno-3-38" name="__codelineno-3-38"></a>          <span class="n">individual_property_restrictions</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Accessibility:Yes&#39;</span><span class="p">]]</span>
<a id="__codelineno-3-39" name="__codelineno-3-39"></a>      <span class="p">),</span>
<a id="__codelineno-3-40" name="__codelineno-3-40"></a>      <span class="n">node_ids</span><span class="o">=</span><span class="n">node_ids</span><span class="p">,</span>
<a id="__codelineno-3-41" name="__codelineno-3-41"></a>      <span class="n">event_name</span><span class="o">=</span><span class="s1">&#39;HCTUptakeAtDebut: state 0 (decision, sigmoid by year and sex)&#39;</span>
<a id="__codelineno-3-42" name="__codelineno-3-42"></a>  <span class="p">)</span>
<a id="__codelineno-3-43" name="__codelineno-3-43"></a>  <span class="k">return</span> <span class="p">(</span>
<a id="__codelineno-3-44" name="__codelineno-3-44"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">HCT_TESTING_LOOP_TRIGGER</span><span class="p">,</span>  <span class="c1"># return the trigger for the HCTTestingLoop state</span>
<a id="__codelineno-3-45" name="__codelineno-3-45"></a>      <span class="n">coc</span><span class="o">.</span><span class="n">HCT_UPTAKE_POST_DEBUT_TRIGGER_1</span>
<a id="__codelineno-3-46" name="__codelineno-3-46"></a>  <span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Modify Event Listening Duration:</p>
<p>Adjust the copied function so that it behaves like the baseline, but stops after 35 years or by 2025 (i.e., stop 
listening for the <strong>STIDebut</strong> event after that time). In order to do this, set the duration parameter in the 
<code>add_intervention_triggered()</code> function to 365 * 35 days (35 years) when distributing the <code>uptake_choice</code> intervention.
You can modify line 32  - 42 in the copied function to include a <code>duration</code> parameter and set it to 35 years:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1"># stop listing for STIDebut after 35 years.</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="n">duration</span> <span class="o">=</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">35</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="n">add_intervention_triggered</span><span class="p">(</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>      <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>      <span class="n">intervention_list</span><span class="o">=</span><span class="p">[</span><span class="n">uptake_choice</span><span class="p">],</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>      <span class="n">triggers_list</span><span class="o">=</span><span class="p">[</span><span class="n">initial_trigger</span><span class="p">],</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a>      <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a>      <span class="n">property_restrictions</span><span class="o">=</span><span class="n">PropertyRestrictions</span><span class="p">(</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a>          <span class="n">individual_property_restrictions</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Accessibility:Yes&#39;</span><span class="p">]]</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a>      <span class="p">),</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a>      <span class="n">node_ids</span><span class="o">=</span><span class="n">node_ids</span><span class="p">,</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a>      <span class="n">event_name</span><span class="o">=</span><span class="s1">&#39;HCTUptakeAtDebut: state 0 (decision, sigmoid by year and sex)&#39;</span><span class="p">,</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a>      <span class="n">duration</span><span class="o">=</span><span class="n">duration</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>  <span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Insert Long-Lasting PrEP Distribution:</p>
<p>Before the normal decision point (the sigmoid choice), begin listening for the <strong>STIDebut</strong> event, distribute a very long-lasting form of 
PrEP(ControlledVaccine), and broadcast a new event, <strong>Enter_Health_Care_System</strong>, starting in the year 2025.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1"># insert a long-lasting ControlledVaccine</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="n">laprep_start_year</span> <span class="o">=</span> <span class="n">start_year</span> <span class="o">+</span> <span class="n">duration</span> <span class="o">/</span> <span class="mi">365</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="n">vaccine</span> <span class="o">=</span> <span class="n">ControlledVaccine</span><span class="p">(</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>   <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>   <span class="n">waning_config</span><span class="o">=</span><span class="n">Constant</span><span class="p">(</span><span class="mf">0.99</span><span class="p">),</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>   <span class="n">common_intervention_parameters</span><span class="o">=</span><span class="n">CommonInterventionParameters</span><span class="p">(</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>       <span class="n">disqualifying_properties</span><span class="o">=</span><span class="n">disqualifying_properties</span><span class="p">,</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>       <span class="n">new_property_value</span><span class="o">=</span><span class="n">hct_upate_at_debut_pv</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>   <span class="p">)</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="p">)</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="n">broadcast_event</span> <span class="o">=</span> <span class="n">BroadcastEvent</span><span class="p">(</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>   <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>   <span class="n">broadcast_event</span><span class="o">=</span><span class="s2">&quot;Enter_Health_Care_System&quot;</span><span class="p">,</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a>   <span class="n">common_intervention_parameters</span><span class="o">=</span><span class="n">CommonInterventionParameters</span><span class="p">(</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>       <span class="n">disqualifying_properties</span><span class="o">=</span><span class="n">disqualifying_properties</span><span class="p">,</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>       <span class="n">new_property_value</span><span class="o">=</span><span class="n">hct_upate_at_debut_pv</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a>   <span class="p">)</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="p">)</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="n">add_intervention_triggered</span><span class="p">(</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a>   <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a>   <span class="n">intervention_list</span><span class="o">=</span><span class="p">[</span><span class="n">vaccine</span><span class="p">,</span> <span class="n">broadcast_event</span><span class="p">],</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a>   <span class="n">triggers_list</span><span class="o">=</span><span class="p">[</span><span class="n">initial_trigger</span><span class="p">],</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a>   <span class="n">start_year</span><span class="o">=</span><span class="n">laprep_start_year</span><span class="p">,</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a>   <span class="n">property_restrictions</span><span class="o">=</span><span class="n">PropertyRestrictions</span><span class="p">(</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a>       <span class="n">individual_property_restrictions</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Accessibility:Yes&#39;</span><span class="p">]]</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a>   <span class="p">),</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a>   <span class="n">node_ids</span><span class="o">=</span><span class="n">node_ids</span><span class="p">,</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a>   <span class="n">event_name</span><span class="o">=</span><span class="s1">&#39;HCTUptakeAtDebut: LA-PrEP on STI Debut&#39;</span>
<a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Update Uptake Choice Based on New Event:</p>
<p>Modify the distribution of the uptake_choice intervention so it depends on the new <strong>Enter_Health_Care_System</strong> 
event starting in year 2025.
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># distribute the SigmoidByYearAndSexDiagnostic intervention by Enter_Health_Care_System event</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="n">add_intervention_triggered</span><span class="p">(</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>   <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>   <span class="n">intervention_list</span><span class="o">=</span><span class="p">[</span><span class="n">uptake_choice</span><span class="p">],</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>   <span class="n">triggers_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Enter_Health_Care_System&quot;</span><span class="p">],</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>   <span class="n">start_year</span><span class="o">=</span><span class="n">laprep_start_year</span><span class="p">,</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>   <span class="n">property_restrictions</span><span class="o">=</span><span class="n">PropertyRestrictions</span><span class="p">(</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a>       <span class="n">individual_property_restrictions</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Accessibility:Yes&#39;</span><span class="p">]]</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>   <span class="p">),</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>   <span class="n">node_ids</span><span class="o">=</span><span class="n">node_ids</span><span class="p">,</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a>   <span class="n">event_name</span><span class="o">=</span><span class="s1">&#39;HCTUptakeAtDebut: state 0 triggered by Enter_Health_Care_System after 2025&#39;</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
</li>
</ol>
<p>On the left side is the original function from <code>ZambiaForTraining</code>, and on the right is the modified function for <code>ZambiaWithLongLastingPrep</code>.</p>
<p><strong>Comparison of HCT Uptake at Debut function:</strong></p>
<table>
<thead>
<tr>
<th>ZambiaForTraining (original)</th>
<th>ZambiaWithLongLastingPrep (modified)</th>
</tr>
</thead>
<tbody>
<tr>
<td>See comparison below</td>
<td>See comparison below</td>
</tr>
</tbody>
</table>
<p><img alt="img_1.png" src="../../images/HCT_Uptake.png" /></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In this tutorial, the <code>ZambiaForTraining</code> class serves as the base for <code>ZambiaWithLongLastingPrep</code>. 
<code>ZambiaForTraining</code> is similar to the <code>Zambia</code> country model but utilizes a smaller population to accelerate 
simulation time.</p>
<p>You may select any country model class to use as a base class in your projects.</p>
</div>
<p>Here is a complete example of the <code>zambia_withlong_lasting_prep.py</code> file with line numbers for easier reference:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">  1</a></span>
<span class="normal"><a href="#__codelineno-7-2">  2</a></span>
<span class="normal"><a href="#__codelineno-7-3">  3</a></span>
<span class="normal"><a href="#__codelineno-7-4">  4</a></span>
<span class="normal"><a href="#__codelineno-7-5">  5</a></span>
<span class="normal"><a href="#__codelineno-7-6">  6</a></span>
<span class="normal"><a href="#__codelineno-7-7">  7</a></span>
<span class="normal"><a href="#__codelineno-7-8">  8</a></span>
<span class="normal"><a href="#__codelineno-7-9">  9</a></span>
<span class="normal"><a href="#__codelineno-7-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-7-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-7-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-7-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-7-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-7-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-7-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-7-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-7-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-7-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-7-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-7-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-7-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-7-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-7-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-7-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-7-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-7-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-7-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-7-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-7-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-7-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-7-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-7-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-7-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-7-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-7-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-7-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-7-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-7-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-7-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-7-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-7-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-7-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-7-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-7-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-7-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-7-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-7-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-7-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-7-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-7-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-7-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-7-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-7-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-7-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-7-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-7-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-7-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-7-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-7-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-7-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-7-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-7-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-7-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-7-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-7-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-7-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-7-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-7-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-7-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-7-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-7-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-7-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-7-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-7-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-7-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-7-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-7-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-7-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-7-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-7-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-7-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-7-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-7-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-7-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-7-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-7-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-7-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-7-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-7-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-7-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-7-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-7-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-7-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-7-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-7-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-7-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-7-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-7-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-7-100">100</a></span>
<span class="normal"><a href="#__codelineno-7-101">101</a></span>
<span class="normal"><a href="#__codelineno-7-102">102</a></span>
<span class="normal"><a href="#__codelineno-7-103">103</a></span>
<span class="normal"><a href="#__codelineno-7-104">104</a></span>
<span class="normal"><a href="#__codelineno-7-105">105</a></span>
<span class="normal"><a href="#__codelineno-7-106">106</a></span>
<span class="normal"><a href="#__codelineno-7-107">107</a></span>
<span class="normal"><a href="#__codelineno-7-108">108</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">emod_api</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.distributor</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_intervention_triggered</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.individual_intervention</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>    <span class="n">HIVSigmoidByYearAndSexDiagnostic</span><span class="p">,</span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>    <span class="n">ControlledVaccine</span><span class="p">,</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>    <span class="n">BroadcastEvent</span><span class="p">,</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>    <span class="n">Sigmoid</span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="p">)</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.common</span><span class="w"> </span><span class="kn">import</span> <span class="n">CommonInterventionParameters</span><span class="p">,</span> <span class="n">PropertyRestrictions</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="kn">import</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.cascade_of_care</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">coc</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.countries</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZambiaForTraining</span> 
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="kn">from</span><span class="w"> </span><span class="nn">emodpy_hiv.campaign.waning_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">Constant</span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a><span class="k">class</span><span class="w"> </span><span class="nc">ZambiaWithLongLastingPrep</span><span class="p">(</span><span class="n">ZambiaForTraining</span><span class="p">):</span>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a>    <span class="n">country_name</span> <span class="o">=</span> <span class="s2">&quot;ZambiaWithLongLastingPrep&quot;</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">add_state_HCTUptakeAtDebut</span><span class="p">(</span>
<a id="__codelineno-7-20" name="__codelineno-7-20"></a>        <span class="bp">cls</span><span class="p">,</span>
<a id="__codelineno-7-21" name="__codelineno-7-21"></a>        <span class="n">campaign</span><span class="p">:</span> <span class="n">emod_api</span><span class="o">.</span><span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-7-22" name="__codelineno-7-22"></a>        <span class="n">start_year</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<a id="__codelineno-7-23" name="__codelineno-7-23"></a>        <span class="n">node_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a>    <span class="p">):</span>
<a id="__codelineno-7-25" name="__codelineno-7-25"></a>        <span class="n">disqualifying_properties</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">LOST_FOREVER</span><span class="p">,</span>
<a id="__codelineno-7-27" name="__codelineno-7-27"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">ON_ART</span><span class="p">,</span>
<a id="__codelineno-7-28" name="__codelineno-7-28"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">LINKING_TO_ART</span><span class="p">,</span>
<a id="__codelineno-7-29" name="__codelineno-7-29"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">ON_PRE_ART</span><span class="p">,</span>
<a id="__codelineno-7-30" name="__codelineno-7-30"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">LINKING_TO_PRE_ART</span><span class="p">,</span>
<a id="__codelineno-7-31" name="__codelineno-7-31"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">ART_STAGING</span>
<a id="__codelineno-7-32" name="__codelineno-7-32"></a>        <span class="p">]</span>
<a id="__codelineno-7-33" name="__codelineno-7-33"></a>        <span class="n">initial_trigger</span> <span class="o">=</span> <span class="n">coc</span><span class="o">.</span><span class="n">CustomEvent</span><span class="o">.</span><span class="n">STI_DEBUT</span>
<a id="__codelineno-7-34" name="__codelineno-7-34"></a>        <span class="n">hct_upate_at_debut_pv</span> <span class="o">=</span> <span class="n">coc</span><span class="o">.</span><span class="n">CascadeState</span><span class="o">.</span><span class="n">HCT_UPTAKE_AT_DEBUT</span>
<a id="__codelineno-7-35" name="__codelineno-7-35"></a>
<a id="__codelineno-7-36" name="__codelineno-7-36"></a>        <span class="c1"># set up health care testing uptake at sexual debut by time</span>
<a id="__codelineno-7-37" name="__codelineno-7-37"></a>        <span class="c1"># stop listing for STIDebut after 35 years.</span>
<a id="__codelineno-7-38" name="__codelineno-7-38"></a>        <span class="n">female_multiplier</span> <span class="o">=</span> <span class="mf">1.0</span>
<a id="__codelineno-7-39" name="__codelineno-7-39"></a>        <span class="n">duration</span> <span class="o">=</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">35</span>
<a id="__codelineno-7-40" name="__codelineno-7-40"></a>        <span class="n">uptake_choice</span> <span class="o">=</span> <span class="n">HIVSigmoidByYearAndSexDiagnostic</span><span class="p">(</span>
<a id="__codelineno-7-41" name="__codelineno-7-41"></a>            <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-7-42" name="__codelineno-7-42"></a>            <span class="n">year_sigmoid</span><span class="o">=</span><span class="n">Sigmoid</span><span class="p">(</span><span class="nb">min</span><span class="o">=-</span><span class="mf">0.005</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="mi">2005</span><span class="p">,</span> <span class="n">rate</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<a id="__codelineno-7-43" name="__codelineno-7-43"></a>            <span class="n">positive_diagnosis_event</span><span class="o">=</span><span class="n">coc</span><span class="o">.</span><span class="n">HCT_TESTING_LOOP_TRIGGER</span><span class="p">,</span>
<a id="__codelineno-7-44" name="__codelineno-7-44"></a>            <span class="n">negative_diagnosis_event</span><span class="o">=</span><span class="n">coc</span><span class="o">.</span><span class="n">HCT_UPTAKE_POST_DEBUT_TRIGGER_1</span><span class="p">,</span>
<a id="__codelineno-7-45" name="__codelineno-7-45"></a>            <span class="n">female_multiplier</span><span class="o">=</span><span class="n">female_multiplier</span><span class="p">,</span>
<a id="__codelineno-7-46" name="__codelineno-7-46"></a>            <span class="n">common_intervention_parameters</span><span class="o">=</span><span class="n">CommonInterventionParameters</span><span class="p">(</span>
<a id="__codelineno-7-47" name="__codelineno-7-47"></a>                <span class="n">disqualifying_properties</span><span class="o">=</span><span class="n">disqualifying_properties</span><span class="p">,</span>
<a id="__codelineno-7-48" name="__codelineno-7-48"></a>                <span class="n">new_property_value</span><span class="o">=</span><span class="n">hct_upate_at_debut_pv</span>
<a id="__codelineno-7-49" name="__codelineno-7-49"></a>            <span class="p">)</span>
<a id="__codelineno-7-50" name="__codelineno-7-50"></a>        <span class="p">)</span>
<a id="__codelineno-7-51" name="__codelineno-7-51"></a>        <span class="n">add_intervention_triggered</span><span class="p">(</span>
<a id="__codelineno-7-52" name="__codelineno-7-52"></a>            <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-7-53" name="__codelineno-7-53"></a>            <span class="n">intervention_list</span><span class="o">=</span><span class="p">[</span><span class="n">uptake_choice</span><span class="p">],</span>
<a id="__codelineno-7-54" name="__codelineno-7-54"></a>            <span class="n">triggers_list</span><span class="o">=</span><span class="p">[</span><span class="n">initial_trigger</span><span class="p">],</span>
<a id="__codelineno-7-55" name="__codelineno-7-55"></a>            <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
<a id="__codelineno-7-56" name="__codelineno-7-56"></a>            <span class="n">property_restrictions</span><span class="o">=</span><span class="n">PropertyRestrictions</span><span class="p">(</span>
<a id="__codelineno-7-57" name="__codelineno-7-57"></a>                <span class="n">individual_property_restrictions</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Accessibility:Yes&#39;</span><span class="p">]]</span>
<a id="__codelineno-7-58" name="__codelineno-7-58"></a>            <span class="p">),</span>
<a id="__codelineno-7-59" name="__codelineno-7-59"></a>            <span class="n">node_ids</span><span class="o">=</span><span class="n">node_ids</span><span class="p">,</span>
<a id="__codelineno-7-60" name="__codelineno-7-60"></a>            <span class="n">event_name</span><span class="o">=</span><span class="s1">&#39;HCTUptakeAtDebut: state 0 (decision, sigmoid by year and sex)&#39;</span><span class="p">,</span>
<a id="__codelineno-7-61" name="__codelineno-7-61"></a>            <span class="n">duration</span><span class="o">=</span><span class="n">duration</span>
<a id="__codelineno-7-62" name="__codelineno-7-62"></a>        <span class="p">)</span>
<a id="__codelineno-7-63" name="__codelineno-7-63"></a>
<a id="__codelineno-7-64" name="__codelineno-7-64"></a>        <span class="c1"># insert a long-lasting ControlledVaccine</span>
<a id="__codelineno-7-65" name="__codelineno-7-65"></a>        <span class="n">laprep_start_year</span> <span class="o">=</span> <span class="n">start_year</span> <span class="o">+</span> <span class="n">duration</span> <span class="o">/</span> <span class="mi">365</span>
<a id="__codelineno-7-66" name="__codelineno-7-66"></a>        <span class="n">vaccine</span> <span class="o">=</span> <span class="n">ControlledVaccine</span><span class="p">(</span>
<a id="__codelineno-7-67" name="__codelineno-7-67"></a>            <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-7-68" name="__codelineno-7-68"></a>            <span class="n">waning_config</span><span class="o">=</span><span class="n">Constant</span><span class="p">(</span><span class="mf">0.99</span><span class="p">),</span>
<a id="__codelineno-7-69" name="__codelineno-7-69"></a>            <span class="n">common_intervention_parameters</span><span class="o">=</span><span class="n">CommonInterventionParameters</span><span class="p">(</span>
<a id="__codelineno-7-70" name="__codelineno-7-70"></a>                <span class="n">disqualifying_properties</span><span class="o">=</span><span class="n">disqualifying_properties</span><span class="p">,</span>
<a id="__codelineno-7-71" name="__codelineno-7-71"></a>                <span class="n">new_property_value</span><span class="o">=</span><span class="n">hct_upate_at_debut_pv</span>
<a id="__codelineno-7-72" name="__codelineno-7-72"></a>            <span class="p">)</span>
<a id="__codelineno-7-73" name="__codelineno-7-73"></a>        <span class="p">)</span>
<a id="__codelineno-7-74" name="__codelineno-7-74"></a>        <span class="n">broadcast_event</span> <span class="o">=</span> <span class="n">BroadcastEvent</span><span class="p">(</span>
<a id="__codelineno-7-75" name="__codelineno-7-75"></a>            <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-7-76" name="__codelineno-7-76"></a>            <span class="n">broadcast_event</span><span class="o">=</span><span class="s2">&quot;Enter_Health_Care_System&quot;</span><span class="p">,</span>
<a id="__codelineno-7-77" name="__codelineno-7-77"></a>            <span class="n">common_intervention_parameters</span><span class="o">=</span><span class="n">CommonInterventionParameters</span><span class="p">(</span>
<a id="__codelineno-7-78" name="__codelineno-7-78"></a>                <span class="n">disqualifying_properties</span><span class="o">=</span><span class="n">disqualifying_properties</span><span class="p">,</span>
<a id="__codelineno-7-79" name="__codelineno-7-79"></a>                <span class="n">new_property_value</span><span class="o">=</span><span class="n">hct_upate_at_debut_pv</span>
<a id="__codelineno-7-80" name="__codelineno-7-80"></a>            <span class="p">)</span>
<a id="__codelineno-7-81" name="__codelineno-7-81"></a>        <span class="p">)</span>
<a id="__codelineno-7-82" name="__codelineno-7-82"></a>        <span class="n">add_intervention_triggered</span><span class="p">(</span>
<a id="__codelineno-7-83" name="__codelineno-7-83"></a>            <span class="n">campaign</span><span class="o">=</span><span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-7-84" name="__codelineno-7-84"></a>            <span class="n">intervention_list</span><span class="o">=</span><span class="p">[</span><span class="n">vaccine</span><span class="p">,</span> <span class="n">broadcast_event</span><span class="p">],</span>
<a id="__codelineno-7-85" name="__codelineno-7-85"></a>            <span class="n">triggers_list</span><span class="o">=</span><span class="p">[</span><span class="n">initial_trigger</span><span class="p">],</span>
<a id="__codelineno-7-86" name="__codelineno-7-86"></a>            <span class="n">start_year</span><span class="o">=</span><span class="n">laprep_start_year</span><span class="p">,</span>
<a id="__codelineno-7-87" name="__codelineno-7-87"></a>            <span class="n">property_restrictions</span><span class="o">=</span><span class="n">PropertyRestrictions</span><span class="p">(</span>
<a id="__codelineno-7-88" name="__codelineno-7-88"></a>                <span class="n">individual_property_restrictions</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Accessibility:Yes&#39;</span><span class="p">]]</span>
<a id="__codelineno-7-89" name="__codelineno-7-89"></a>            <span class="p">),</span>
<a id="__codelineno-7-90" name="__codelineno-7-90"></a>            <span class="n">node_ids</span><span class="o">=</span><span class="n">node_ids</span><span class="p">,</span>
<a id="__codelineno-7-91" name="__codelineno-7-91"></a>            <span class="n">event_name</span><span class="o">=</span><span class="s1">&#39;HCTUptakeAtDebut: LA-PrEP on STI Debut&#39;</span>
<a id="__codelineno-7-92" name="__codelineno-7-92"></a>        <span class="p">)</span>
<a id="__codelineno-7-93" name="__codelineno-7-93"></a>        <span class="c1"># distribute the SigmoidByYearAndSexDiagnostic intervention by Enter_Health_Care_System event</span>
<a id="__codelineno-7-94" name="__codelineno-7-94"></a>        <span class="n">add_intervention_triggered</span><span class="p">(</span>
<a id="__codelineno-7-95" name="__codelineno-7-95"></a>            <span class="n">campaign</span><span class="p">,</span>
<a id="__codelineno-7-96" name="__codelineno-7-96"></a>            <span class="n">intervention_list</span><span class="o">=</span><span class="p">[</span><span class="n">uptake_choice</span><span class="p">],</span>
<a id="__codelineno-7-97" name="__codelineno-7-97"></a>            <span class="n">triggers_list</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Enter_Health_Care_System&quot;</span><span class="p">],</span>
<a id="__codelineno-7-98" name="__codelineno-7-98"></a>            <span class="n">start_year</span><span class="o">=</span><span class="n">laprep_start_year</span><span class="p">,</span>
<a id="__codelineno-7-99" name="__codelineno-7-99"></a>            <span class="n">property_restrictions</span><span class="o">=</span><span class="n">PropertyRestrictions</span><span class="p">(</span>
<a id="__codelineno-7-100" name="__codelineno-7-100"></a>                <span class="n">individual_property_restrictions</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;Accessibility:Yes&#39;</span><span class="p">]]</span>
<a id="__codelineno-7-101" name="__codelineno-7-101"></a>            <span class="p">),</span>
<a id="__codelineno-7-102" name="__codelineno-7-102"></a>            <span class="n">node_ids</span><span class="o">=</span><span class="n">node_ids</span><span class="p">,</span>
<a id="__codelineno-7-103" name="__codelineno-7-103"></a>            <span class="n">event_name</span><span class="o">=</span><span class="s1">&#39;HCTUptakeAtDebut: state 0 triggered by Enter_Health_Care_System after 2025&#39;</span>
<a id="__codelineno-7-104" name="__codelineno-7-104"></a>        <span class="p">)</span>
<a id="__codelineno-7-105" name="__codelineno-7-105"></a>        <span class="k">return</span> <span class="p">(</span>
<a id="__codelineno-7-106" name="__codelineno-7-106"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">HCT_TESTING_LOOP_TRIGGER</span><span class="p">,</span>  <span class="c1"># return the trigger for the HCTTestingLoop state</span>
<a id="__codelineno-7-107" name="__codelineno-7-107"></a>            <span class="n">coc</span><span class="o">.</span><span class="n">HCT_UPTAKE_POST_DEBUT_TRIGGER_1</span>
<a id="__codelineno-7-108" name="__codelineno-7-108"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="c-update-frame-to-use-new-country-model">c. Update frame to use new country model</h3>
<p>Now the <code>ZambiaWithLongLastingPrep</code> country model has been created, it is not yet recognized by <code>emodpy-workflow</code> or 
<code>emodpy-hiv</code>. To use this new country model in the <code>ZambiaWithLongLastingPrep_coc</code> frame, you need to update the frame 
to reference it. For simplicity in this tutorial, move the file to the frame directory and import it directly in <code>campaign.py</code>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Ideally, if you want to make the new country model reusable, you can put it in the <code>emodpy_hiv/country</code> directory and 
import it in <code>campaign.py</code>. Please see <a href="#g-optional-public-zambiawithlonglastingprep-country-model">step g</a> for more 
details. For the current step in this tutorial, we will keep it simple and just move the file to the frame directory.</p>
</div>
<p>Modify the import statement in <code>campaign.py</code>, <code>config.py</code>, and <code>demographics.py</code> to import the <code>ZambiaWithLongLastingPrep</code> country 
model:</p>
<p>In each file, comment out the current country model import line(line 1) and replace it with an import for 
<code>ZambiaWithLongLastingPrep</code> (line 2 - 4).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="c1"># from emodpy_hiv.countries import ZambiaWithLongLastingPrep as country_model</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span><span class="o">,</span><span class="w"> </span><span class="nn">os</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">zambia_withlong_lasting_prep</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZambiaWithLongLastingPrep</span> <span class="k">as</span> <span class="n">country_model</span>
</code></pre></div></td></tr></table></div>
<h3 id="d-run-emod">d. Run EMOD</h3>
<p>Now you can run EMOD with the new <code>ZambiaWithLongLastingPrep_coc</code> frame:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>python<span class="w"> </span>-m<span class="w"> </span>emodpy_workflow.scripts.run<span class="w"> </span>-N<span class="w"> </span>ZambiaWithLongLastingPrep<span class="w"> </span>-f<span class="w"> </span>ZambiaWithLongLastingPrep_coc<span class="w"> </span>-o<span class="w"> </span>results/ZambiaWithLongLastingPrep_coc<span class="w"> </span>-p<span class="w"> </span>ContainerPlatform
</code></pre></div></td></tr></table></div>
Please see the <a href="../run_emod/">run EMOD</a> tutorial for more details on this command.</p>
<h3 id="e-plot-insetchart">e. Plot InsetChart</h3>
<p>After running the simulation, you can examine the results by plotting the <strong>InsetChart</strong> to compare the <code>ZambiaWithLongLastingPrep_coc</code> frame 
with the baseline.</p>
<ol>
<li>
<p>Download the <strong>InsetChart</strong> to the <code>results/ZambiaWithLongLastingPrep_coc</code> directory:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>python<span class="w"> </span>-m<span class="w"> </span>emodpy_workflow.scripts.download<span class="w"> </span>-d<span class="w"> </span>output/InsetChart.json<span class="w"> </span>-r<span class="w"> </span>results/ZambiaWithLongLastingPrep_coc/experiment_index.csv<span class="w"> </span>-p<span class="w"> </span>ContainerPlatform
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Use the plotting tool to compare the output with the baseline:</p>
</li>
</ol>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>python<span class="w"> </span>-m<span class="w"> </span>emodpy_hiv.plotting.plot_inset_chart<span class="w"> </span>results/my_first_run/my_first_suite--0/InsetChart/InsetChart_sample00000_run00001.json<span class="w"> </span>-d<span class="w"> </span>results/ZambiaWithLongLastingPrep_coc/ZambiaWithLongLastingPrep--0/InsetChart/<span class="w"> </span>-t<span class="w"> </span><span class="s2">&quot;InsetChart-ZambiaWithLongLastingPrep_coc&quot;</span><span class="w"> </span>-o<span class="w"> </span>images/ZambiaWithLongLastingPrep_coc
</code></pre></div></td></tr></table></div>
Here is an example of what you might see in the <strong>InsetChart</strong> comparing baseline and <code>ZambiaWithLongLastingPrep_coc</code>:
<img alt="ZambiaWithLongLastingPrep_cc.png" src="../../images/ZambiaWithLongLastingPrep_cc.png" /></p>
<p>You should see prevalence drops but costs go up after year 2025 when the long-lasting PrEP is introduced. The red line 
is the baseline and the blue line is the <code>ZambiaWithLongLastingPrep_coc</code> frame.</p>
<h3 id="f-plot-reporthivbyageandgender">f. Plot ReportHIVByAgeAndGender</h3>
<p>Next, we plot the number of infected people from <strong>ReportHIVByAgeAndGender</strong> across ages to highlight that it takes decades
for older age group infection counts to stabilize in response to the ZambiaWithLongLastingPrep campaign.</p>
<ol>
<li>
<p>Download the <strong>ReportHIVByAgeAndGender</strong> to the <code>results/ZambiaWithLongLastingPrep_coc</code> directory:
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>python<span class="w"> </span>-m<span class="w"> </span>emodpy_workflow.scripts.download<span class="w"> </span>-d<span class="w"> </span>output/ReportHIVByAgeAndGender.csv<span class="w"> </span>-r<span class="w"> </span>results/ZambiaWithLongLastingPrep_coc/experiment_index.csv<span class="w"> </span>-p<span class="w"> </span>ContainerPlatform
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>Visualize infection counts across age groups:</p>
</li>
</ol>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a>python<span class="w"> </span>-m<span class="w"> </span>emodpy_hiv.plotting.plot_hiv_by_age_and_gender<span class="w"> </span>results/ZambiaWithLongLastingPrep_coc/ZambiaWithLongLastingPrep--0/ReportHIVByAgeAndGender/<span class="w"> </span>-p<span class="w"> </span>prevalence<span class="w"> </span>-a<span class="w"> </span>-m<span class="w"> </span>-o<span class="w"> </span>images/ZambiaWithLongLastingPrep_coc
</code></pre></div></td></tr></table></div>
Here is an example of what you might see in the <strong>ReportHIVByAgeAndGender</strong> for ZambiaWithLongLastingPrep_coc frame:
<img alt="ZambiaWithLongLastingPrep_cc_age_group.png" src="../../images/ZambiaWithLongLastingPrep_cc_age_group.png" /></p>
<h3 id="g-optional-public-zambiawithlonglastingprep-country-model">g. Optional: Public ZambiaWithLongLastingPrep country model</h3>
<p>If you want to make the <code>ZambiaWithLongLastingPrep</code> country model reusable, you can put it in <code>emodpy-hiv</code> and use it in <code>emodpy-workflow</code>.
Please refer to <a href="../../how_to/how_to_publish_new_country_model/">How to publish a new country model</a> for more details.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The 3 campaign tutorials demonstrated how to modify campaign logic in <strong>EMOD</strong> simulations using <code>emodpy_workflow</code>, including 
creating minimal campaigns, adding interventions directly, and customizing country models for advanced scenarios. By 
mastering these techniques, you can tailor simulations to specific research questions and programmatic needs.</p>
<p>For further customization, refer to the following tutorials:</p>
<ul>
<li><a href="../modify_configuration/">Modify Config</a>: Adjust simulation parameters and settings.</li>
<li><a href="../modify_reports/">Modify Reports</a>: Customize output reports and data collection.</li>
</ul>
<p>Combining these approaches enables comprehensive control over your <strong>EMOD</strong> workflows and simulation outcomes.</p>









  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! If you like, provide additional information by using our <a href="https://app.smartsheet.com/b/form/ec8dbb77809949ecab7286a5ca74a206" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="https://app.smartsheet.com/b/form/ec8dbb77809949ecab7286a5ca74a206" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../modify_campaign_2_add_vaccine/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Modify campaign: Add HIV vaccine">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Modify campaign: Add HIV vaccine
              </div>
            </div>
          </a>
        
        
          
          <a href="../using_parameterized_calls/" class="md-footer__link md-footer__link--next" aria-label="Next: Using ParameterizedCalls">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Using ParameterizedCalls
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      
<div class="md-copyright">
    
    <div class="md-copyright__highlight">
        Copyright &copy; 2025 Gates Foundation. All rights reserved.
        
        <a href="" target="_blank" rel="noopener" style="TEXT-DECORATION: underline">Privacy and Cookies Notice</a>
        
        <a href="https://www.gatesfoundation.org/Privacy-and-Cookies-Notice" target="_blank" rel="noopener" style="TEXT-DECORATION: underline"></a>
        
        <a href="" target="_blank" rel="noopener" style="TEXT-DECORATION: underline">Terms of Use</a>
        
        <a href="https://www.gatesfoundation.org/Terms-of-Use" target="_blank" rel="noopener" style="TEXT-DECORATION: underline"></a>
        
    </div>
    
    
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/EMOD-Hub" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>